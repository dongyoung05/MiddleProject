<%@page import="java.util.List"%>
<%@page import="kr.or.ddit.vo.BoardVO"%>
<%@page import="kr.or.ddit.vo.MemberVO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    <%@ page isELIgnored="true" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<!--   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
<!--   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> -->
  <script src="<%= request.getContextPath() %>/js/jquery-3.7.1.min.js"></script>
  <script src="<%= request.getContextPath() %>/js/jquery.serializejson.min.js"></script>
  <link rel="stylesheet" href="<%= request.getContextPath() %>/css/MainPage.css">
  <link rel="stylesheet" href="<%= request.getContextPath() %>/css/중분류페이지공통스타일.css">
<style>
	.hr{
		border: 1px solid black;
		width: 100%;
		margin: 0 auto;
	}
	
	table {
	  font-family: arial, sans-serif;
	  border-collapse: collapse;
	  width: 100%;
	}
	
	td, th {
	  border: 1px solid #dddddd;
	  text-align: left;
	  padding: 8px;
	}
</style>



<%
// 여기는 Session 객체로 로그인 정보 받아올 곳
// 로그인 정보가 있냐 없냐에 따라 명함에 버튼, 프로필, 인삿말 변경되야함

String imgPath = request.getContextPath() + "/images";
MemberVO memberVo = (MemberVO)session.getAttribute("loginok");

%>

<script>

$(function(){
	
	// 로고 클릭시 홈으로
	$('#logo').on('click', function(){
		location.href="<%= request.getContextPath()%>/main/main.jsp";
	})
	
	// 중분류 페이지 이동
	$('#hotel_intro').on('click', function(){
		location.href="<%= request.getContextPath()%>/hotel/hotelIntro.jsp";
	})
	
	$('#hotel_reserve').on('click', function(){
		location.href="<%= request.getContextPath()%>/hotel/hotelReserve.jsp";
	})
	
	$('#salon_reserve').on('click', function(){
		location.href="<%= request.getContextPath()%>/salon/salonIntro.jsp";
	})
	
	$('#prod_sale').on('click', function(){
		location.href="<%= request.getContextPath()%>/prod/getAllProd.do";
	})
	
	$('#hotel_help').on('click', function(){
      location.href="<%= request.getContextPath()%>/boardList_QUES.do";

	})
	
	// 메인 사진 오른쪽 화살표 눌렀을 때 사진 이동
	$('#right').on('click', function(){
		$.slideImg(1);
	})
	
	$('#left').on('click', function(){
		$.slideImg(-1);
	})
	
	// 현재 메인 페이지 사진
	curMainImg = 1;
	
	$.slideImg = (function(){
		if(n == 1 && curMainImg == $('.slideImg').length) {
			curMainImg = 1;
		}else if(n == -1 && curMainImg == 1) {
			curMainImg = $('.slideImg').length;
		} else{
			curMainImg = curMainImg + n;
		}
			
		$.each($('.slideImg'), function(i, v){
			$(v).css('display', 'none');
			
			if(i == curMainImg - 1) $(v).css('display', 'inline-block');
		});
	})
})

</script>
</head>
<%
	List<BoardVO> boardList = (List<BoardVO>)request.getAttribute("boardList_QUES");
%>
<body>

<!-- 
	클래스 이름: header - 메인 페이지 맨 위 div
	요소: logo, profile(명함)
 -->
<div class="header">
	<!-- 로고 이미지 - images폴더에서 사진 가져옴 -->
	<img id="logo" src="<%= imgPath %>/main/DHA_logo3.png" alt="DHA_logo3.png">
	
	<div id="profile" class="profile">
		<%
		if(memberVo == null){			
		%>	
		<img id="profileImg" src="<%= imgPath %>/main/대충회원프로필1.png" alt="대충회원프로필1.png">
		<!-- 프로필 옆에 문구 + 밑에 버튼 2개 -->
		<div id="profile_detail">
			<!-- 이름 -->
			<p>로그인이 필요합니다.</p>
			<a href="<%= request.getContextPath() %>/member/LoginMember.jsp">로그인</a>
			<a href="<%= request.getContextPath() %>/member/InsertMember.jsp">회원가입</a>
		</div>	
			
			
<%
		} else {
%>		
		<img id="profileImg" src="../images/member/<%=memberVo.getMem_img() %>" alt="대충회원프로필1.png">
		<!-- 프로필 옆에 문구 + 밑에 버튼 2개 -->
		<div id="profile_detail">
			<!-- 이름 -->
			<p><%=memberVo.getMem_name() %>님 반갑습니다.</p>	
			<a href="<%= request.getContextPath() %>/member/mypageMember.jsp">마이페이지</a>
			<a href="<%= request.getContextPath() %>/logoutMember.do">로그아웃</a>
		</div>	
<% 
		}
%>
			
		
	</div>
</div>


<!--
	클래스 이름: nav - 메인 페이지 nav
	요소 : 중분류 요소들 (호텔 소개, 호텔 예약, 미용 예약, 상품, 고객센터)
 -->
<div class="nav">
	
	<div id="hotel_intro">
		<h3>소개</h3>
	</div>
	
	<div id="hotel_reserve">
		<h3>호텔</h3>
	</div>
	
	<div id="salon_reserve">
		<h3>미용</h3>
	</div>
	
	<div id="prod_sale">
		<h3>상품</h3>
	</div>
	
	<div id="hotel_help">
		<h3>Q&A</h3>
	</div>

</div>


<!-- 
	클래스 이름: containers - container 전체 묶음
	요소 : 메인 그림, 메인 호텔 예약 사진, 메인 미용 예약 사진, 베스트 상품 사진
 -->
<div class="containaer">
		<input type="button" value="게시글 등록" id="boardInsert" onClick="location.href='<%=request.getContextPath()%>/board/boardInsert.jsp'"> 
		<table border="1" class="table table-hover">
	

		<tr>
			<th>제목</th>
			<th>작성일자</th>
			<th>조회수</th>
		</tr>	
<%
			for(BoardVO board : boardList) {
%>
		<tr>
			<td> <a href="<%=request.getContextPath()%>/boardDetail.do?board_no=<%= board.getBoard_no()%>"> <%= board.getBoard_title()%> </a></td>
			<td><%= board.getBoard_date() %></td>
			<td><%= board.getBoard_views() %></td>
		</tr>
			
		
<%
		}
%>	
	</table>
  	</div>
  	
<div class="footer">
	
	<div class="footer">
	
	<div>
		<p>평일 10:00 - 18:00  |  점심시간 12:00-14:00  |  토요일, 일요일, 공휴일 휴무입니다.</p>
	</div>
	
	<div>
		<p>상호: (주)DHA  |  대표: 백지열  |  주소: 대전 중구 계룡로 846 3층</p>
	</div>
	
</div>
	
</div>  	

</body>
</html>