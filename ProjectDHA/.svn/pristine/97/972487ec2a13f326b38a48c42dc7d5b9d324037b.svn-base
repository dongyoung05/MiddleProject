<%@page import="kr.or.ddit.vo.AdminVO"%>
<%@page import="com.google.gson.Gson"%>
<%@page import="kr.or.ddit.vo.MemberVO"%>
<%@page import="kr.or.ddit.vo.ReplyVO"%>
<%@page import="java.util.List"%>
<%@page import="kr.or.ddit.vo.BoardVO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>																								
  <script src="<%=request.getContextPath() %>/js/jquery-3.7.1.min.js"></script>
  <script src="<%= request.getContextPath() %>/js/공통스크립트.js"></script>
  <script src="<%=request.getContextPath() %>/js/jquery.serializejson.min.js"></script>
  <style>
	table {
  		font-family: arial, sans-serif;
  		border-collapse: collapse;
  		width: 100%;
}

	td, th {
 		 border: 1px solid #dddddd;
  		 text-align: left;
  		 padding: 8px;
}

</style>
  	<%
		BoardVO boardVo = (BoardVO)request.getAttribute("boardVo");
  		
  		AdminVO adminVo = (AdminVO)session.getAttribute("adminok");
  		
		List<ReplyVO> replyList = (List<ReplyVO>)request.getAttribute("replyList");
  		
  		String imgPath = "../images/board";
  	%>
  <script>

  mypath = '<%= request.getContextPath() %>';
  board_no = '<%=boardVo.getBoard_no()%>';
  	$(function() {
  		
  		$('#update').on('click',  function() {
  			location.href="<%=request.getContextPath()%>/boardDetail.do?board_no=<%= boardVo.getBoard_no()%>&trigger=Y";
  		});
  		
  		$('#delete').on('click',  function() {
  			if(!confirm("해당 게시물을 삭제하시겠습니까?")){
  				location.href = "<%=request.getContextPath()%>/boardDetail.do?board_no=<%= boardVo.getBoard_no()%>";
  			} else {
  				alert("정상적으로 삭제되었습니다.")
  				location.href = "<%= request.getContextPath()%>/boardDelete.do?board_no=<%=boardVo.getBoard_no()%>";
  			}
  		});
  		
  		
  		
  		$('#replyInsert').click(function(){
  			cont = $('#insertContent').val();
  			writer = '<%=adminVo.getAdmin_id()%>';
  			board_no = '<%=boardVo.getBoard_no()%>';
  			
  			$.ajax({
  				url : '<%= request.getContextPath()%>/replyInsert.do',
  				data : {"reply_content" : cont, 
  					    "reply_writer" : writer,
  					    "board_no" : board_no },
  				dataType : 'json',
  				type : 'post',
  				success : function(res){
  					alert(res.flag );
  				},
  				errot : function(xhr){
  					alert("상태 : " + xhr.status);
  				}
  				
  			})
  		})
  		
	  				
	  			
	  	
	  		
  		
  		
  	})//function
  </script>
</head>

<body>
<h2>게시글 내용</h2>
	<div class="containaer">
		<table border="1">
		
				<!-- <th>게시글번호</th>
				<th>분류</th>
				<th>제목</th>
				<th>작성일자</th>
				<th>내용</th> -->
		
		
			<%-- <tr>
				<td>게시글번호</td>
				<td><%=boardVo.getBoard_no()%></td>
			</tr> --%>
			
			<tr>
				<td><%=boardVo.getBoard_title()%></td>
			</tr>
			
			<tr>
				<td>조회수:<%=boardVo.getBoard_views()%></td>
			</tr>
			
			
			
			<%-- <tr>
				<td>분류</td>
				<td><%=boardVo.getBoard_ctgry_no()%></td>
			</tr>  --%>
			
			<tr>
				<td><%=boardVo.getBoard_date()%></td>
			</tr>
			
			<tr>
				<td colspan="2">
				<img id="board_img" alt="<%= boardVo.getBoard_img() %>" src="<%= imgPath %>/<%= boardVo.getBoard_img()%>">
				</td>
			</tr>
			
			<tr>
				<td colspan="2"><%=boardVo.getBoard_content()%></td>
			</tr>
			
			<tr>
				<td colspan="2" style="text-align: center;">
					<input type="button" id="update" value="수정">
					<input type="button" id="delete" value="삭제">
					<input type="button" id="boardlist" value="게시글목록">
				</td>
			</tr>
			
			<tr>
				<td colspan="2">
					<div id="reply-container">
						<div class="replyCreate">
							<textarea id="insertContent" rows="5 "cols="40"></textarea>
							<input type="button" id="replyInsert" value="등록">
							<input type="button" id="replyCancel" value="취소">
						</div>
						<hr>
						<div id="replyList">
							
							
						
						
						</div>
					</div>
				</td>
			</tr>
		</table>
	</div>
			

</body>
</html>
